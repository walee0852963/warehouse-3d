{"ast":null,"code":"import _objectSpread from \"C:/Users/waleed/Desktop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useFrame, useThree, createPortal } from '@react-three/fiber';\nimport * as React from 'react';\nimport { Vector3, Object3D, Vector2 } from 'three';\nimport { MeshLineGeometry, MeshLineMaterial } from 'meshline';\nconst defaults = {\n  width: 0.2,\n  length: 1,\n  decay: 1,\n  local: false,\n  stride: 0,\n  interval: 1\n};\nconst shiftLeft = function (collection) {\n  let steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  collection.set(collection.subarray(steps));\n  collection.fill(-Infinity, -steps);\n  return collection;\n};\nfunction useTrail(target, settings) {\n  const {\n    length,\n    local,\n    decay,\n    interval,\n    stride\n  } = _objectSpread(_objectSpread({}, defaults), settings);\n  const points = React.useRef(null);\n  const [worldPosition] = React.useState(() => new Vector3());\n  React.useLayoutEffect(() => {\n    if (target) {\n      points.current = Float32Array.from({\n        length: length * 10 * 3\n      }, (_, i) => target.position.getComponent(i % 3));\n    }\n  }, [length, target]);\n  const prevPosition = React.useRef(new Vector3());\n  const frameCount = React.useRef(0);\n  useFrame(() => {\n    if (!target) return;\n    if (!points.current) return;\n    if (frameCount.current === 0) {\n      let newPosition;\n      if (local) {\n        newPosition = target.position;\n      } else {\n        target.getWorldPosition(worldPosition);\n        newPosition = worldPosition;\n      }\n      const steps = 1 * decay;\n      for (let i = 0; i < steps; i++) {\n        if (newPosition.distanceTo(prevPosition.current) < stride) continue;\n        shiftLeft(points.current, 3);\n        points.current.set(newPosition.toArray(), points.current.length - 3);\n      }\n      prevPosition.current.copy(newPosition);\n    }\n    frameCount.current++;\n    frameCount.current = frameCount.current % interval;\n  });\n  return points;\n}\nconst Trail = /* @__PURE__ */React.forwardRef((props, forwardRef) => {\n  const {\n    children\n  } = props;\n  const {\n    width,\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  } = _objectSpread(_objectSpread({}, defaults), props);\n  const {\n    color = 'hotpink',\n    attenuation,\n    target\n  } = props;\n  const size = useThree(s => s.size);\n  const scene = useThree(s => s.scene);\n  const ref = React.useRef(null);\n  const [anchor, setAnchor] = React.useState(null);\n  const points = useTrail(anchor, {\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  });\n  React.useEffect(() => {\n    const t = (target == null ? void 0 : target.current) || ref.current.children.find(o => {\n      return o instanceof Object3D;\n    });\n    if (t) {\n      setAnchor(t);\n    }\n  }, [points, target]);\n  const geo = React.useMemo(() => new MeshLineGeometry(), []);\n  const mat = React.useMemo(() => {\n    var _matOverride, _matOverride2;\n    const m = new MeshLineMaterial({\n      lineWidth: 0.1 * width,\n      color: color,\n      sizeAttenuation: 1,\n      resolution: new Vector2(size.width, size.height)\n    });\n\n    // Get and apply first <meshLineMaterial /> from children\n    let matOverride;\n    if (children) {\n      if (Array.isArray(children)) {\n        matOverride = children.find(child => {\n          const c = child;\n          return typeof c.type === 'string' && c.type === 'meshLineMaterial';\n        });\n      } else {\n        const c = children;\n        if (typeof c.type === 'string' && c.type === 'meshLineMaterial') {\n          matOverride = c;\n        }\n      }\n    }\n    if (typeof ((_matOverride = matOverride) == null ? void 0 : _matOverride.props) === 'object' && ((_matOverride2 = matOverride) == null ? void 0 : _matOverride2.props) !== null) {\n      m.setValues(matOverride.props);\n    }\n    return m;\n  }, [width, color, size, children]);\n  React.useEffect(() => {\n    mat.uniforms.resolution.value.set(size.width, size.height);\n  }, [size]);\n  useFrame(() => {\n    if (!points.current) return;\n    geo.setPoints(points.current, attenuation);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", null, createPortal(/*#__PURE__*/React.createElement(\"mesh\", {\n    ref: forwardRef,\n    geometry: geo,\n    material: mat\n  }), scene), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children));\n});\nexport { Trail, useTrail };","map":{"version":3,"names":["useFrame","useThree","createPortal","React","Vector3","Object3D","Vector2","MeshLineGeometry","MeshLineMaterial","defaults","width","length","decay","local","stride","interval","shiftLeft","collection","steps","arguments","undefined","set","subarray","fill","Infinity","useTrail","target","settings","_objectSpread","points","useRef","worldPosition","useState","useLayoutEffect","current","Float32Array","from","_","i","position","getComponent","prevPosition","frameCount","newPosition","getWorldPosition","distanceTo","toArray","copy","Trail","forwardRef","props","children","color","attenuation","size","s","scene","ref","anchor","setAnchor","useEffect","t","find","o","geo","useMemo","mat","_matOverride","_matOverride2","m","lineWidth","sizeAttenuation","resolution","height","matOverride","Array","isArray","child","c","type","setValues","uniforms","value","setPoints","createElement","geometry","material"],"sources":["C:/Users/waleed/Desktop/node_modules/@react-three/drei/core/Trail.js"],"sourcesContent":["import { useFrame, useThree, createPortal } from '@react-three/fiber';\nimport * as React from 'react';\nimport { Vector3, Object3D, Vector2 } from 'three';\nimport { MeshLineGeometry, MeshLineMaterial } from 'meshline';\n\nconst defaults = {\n  width: 0.2,\n  length: 1,\n  decay: 1,\n  local: false,\n  stride: 0,\n  interval: 1\n};\nconst shiftLeft = (collection, steps = 1) => {\n  collection.set(collection.subarray(steps));\n  collection.fill(-Infinity, -steps);\n  return collection;\n};\nfunction useTrail(target, settings) {\n  const {\n    length,\n    local,\n    decay,\n    interval,\n    stride\n  } = {\n    ...defaults,\n    ...settings\n  };\n  const points = React.useRef(null);\n  const [worldPosition] = React.useState(() => new Vector3());\n  React.useLayoutEffect(() => {\n    if (target) {\n      points.current = Float32Array.from({\n        length: length * 10 * 3\n      }, (_, i) => target.position.getComponent(i % 3));\n    }\n  }, [length, target]);\n  const prevPosition = React.useRef(new Vector3());\n  const frameCount = React.useRef(0);\n  useFrame(() => {\n    if (!target) return;\n    if (!points.current) return;\n    if (frameCount.current === 0) {\n      let newPosition;\n      if (local) {\n        newPosition = target.position;\n      } else {\n        target.getWorldPosition(worldPosition);\n        newPosition = worldPosition;\n      }\n      const steps = 1 * decay;\n      for (let i = 0; i < steps; i++) {\n        if (newPosition.distanceTo(prevPosition.current) < stride) continue;\n        shiftLeft(points.current, 3);\n        points.current.set(newPosition.toArray(), points.current.length - 3);\n      }\n      prevPosition.current.copy(newPosition);\n    }\n    frameCount.current++;\n    frameCount.current = frameCount.current % interval;\n  });\n  return points;\n}\nconst Trail = /* @__PURE__ */React.forwardRef((props, forwardRef) => {\n  const {\n    children\n  } = props;\n  const {\n    width,\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  } = {\n    ...defaults,\n    ...props\n  };\n  const {\n    color = 'hotpink',\n    attenuation,\n    target\n  } = props;\n  const size = useThree(s => s.size);\n  const scene = useThree(s => s.scene);\n  const ref = React.useRef(null);\n  const [anchor, setAnchor] = React.useState(null);\n  const points = useTrail(anchor, {\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  });\n  React.useEffect(() => {\n    const t = (target == null ? void 0 : target.current) || ref.current.children.find(o => {\n      return o instanceof Object3D;\n    });\n    if (t) {\n      setAnchor(t);\n    }\n  }, [points, target]);\n  const geo = React.useMemo(() => new MeshLineGeometry(), []);\n  const mat = React.useMemo(() => {\n    var _matOverride, _matOverride2;\n    const m = new MeshLineMaterial({\n      lineWidth: 0.1 * width,\n      color: color,\n      sizeAttenuation: 1,\n      resolution: new Vector2(size.width, size.height)\n    });\n\n    // Get and apply first <meshLineMaterial /> from children\n    let matOverride;\n    if (children) {\n      if (Array.isArray(children)) {\n        matOverride = children.find(child => {\n          const c = child;\n          return typeof c.type === 'string' && c.type === 'meshLineMaterial';\n        });\n      } else {\n        const c = children;\n        if (typeof c.type === 'string' && c.type === 'meshLineMaterial') {\n          matOverride = c;\n        }\n      }\n    }\n    if (typeof ((_matOverride = matOverride) == null ? void 0 : _matOverride.props) === 'object' && ((_matOverride2 = matOverride) == null ? void 0 : _matOverride2.props) !== null) {\n      m.setValues(matOverride.props);\n    }\n    return m;\n  }, [width, color, size, children]);\n  React.useEffect(() => {\n    mat.uniforms.resolution.value.set(size.width, size.height);\n  }, [size]);\n  useFrame(() => {\n    if (!points.current) return;\n    geo.setPoints(points.current, attenuation);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", null, createPortal(/*#__PURE__*/React.createElement(\"mesh\", {\n    ref: forwardRef,\n    geometry: geo,\n    material: mat\n  }), scene), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children));\n});\n\nexport { Trail, useTrail };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}