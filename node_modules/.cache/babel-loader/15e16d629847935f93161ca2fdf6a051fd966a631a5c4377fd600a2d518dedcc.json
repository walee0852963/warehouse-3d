{"ast":null,"code":"import _objectWithoutProperties from \"C:/Users/waleed/Desktop/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"debug\", \"depthTest\", \"polygonOffsetFactor\", \"map\", \"mesh\", \"children\", \"position\", \"rotation\", \"scale\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { applyProps } from '@react-three/fiber';\nimport { DecalGeometry } from 'three-stdlib';\nfunction isArray(vec) {\n  return Array.isArray(vec);\n}\nfunction vecToArray() {\n  let vec = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0, 0];\n  if (isArray(vec)) {\n    return vec;\n  } else if (vec instanceof THREE.Vector3 || vec instanceof THREE.Euler) {\n    return [vec.x, vec.y, vec.z];\n  } else {\n    return [vec, vec, vec];\n  }\n}\nconst Decal = /* @__PURE__ */React.forwardRef(function Decal(_ref, forwardRef) {\n  let {\n      debug,\n      depthTest = false,\n      polygonOffsetFactor = -10,\n      map,\n      mesh,\n      children,\n      position,\n      rotation,\n      scale\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const ref = React.useRef(null);\n  React.useImperativeHandle(forwardRef, () => ref.current);\n  const helper = React.useRef(null);\n  const state = React.useRef({\n    position: new THREE.Vector3(),\n    rotation: new THREE.Euler(),\n    scale: new THREE.Vector3(1, 1, 1)\n  });\n  React.useLayoutEffect(() => {\n    const parent = (mesh == null ? void 0 : mesh.current) || ref.current.parent;\n    const target = ref.current;\n    if (!(parent instanceof THREE.Mesh)) {\n      throw new Error('Decal must have a Mesh as parent or specify its \"mesh\" prop');\n    }\n    if (parent) {\n      applyProps(state.current, {\n        position,\n        scale\n      });\n\n      // Zero out the parents matrix world for this operation\n      const matrixWorld = parent.matrixWorld.clone();\n      parent.matrixWorld.identity();\n      if (!rotation || typeof rotation === 'number') {\n        const o = new THREE.Object3D();\n        o.position.copy(state.current.position);\n\n        // Thanks https://x.com/N8Programs !\n        const vertices = parent.geometry.attributes.position.array;\n        if (parent.geometry.attributes.normal === undefined) parent.geometry.computeVertexNormals();\n        const normal = parent.geometry.attributes.normal.array;\n        let distance = Infinity;\n        let closestNormal = new THREE.Vector3();\n        const ox = o.position.x;\n        const oy = o.position.y;\n        const oz = o.position.z;\n        const vLength = vertices.length;\n        let chosenIdx = -1;\n        for (let i = 0; i < vLength; i += 3) {\n          const x = vertices[i];\n          const y = vertices[i + 1];\n          const z = vertices[i + 2];\n          const xDiff = x - ox;\n          const yDiff = y - oy;\n          const zDiff = z - oz;\n          const distSquared = xDiff * xDiff + yDiff * yDiff + zDiff * zDiff;\n          if (distSquared < distance) {\n            distance = distSquared;\n            chosenIdx = i;\n          }\n        }\n        closestNormal.fromArray(normal, chosenIdx);\n\n        // Get vector tangent to normal\n        o.lookAt(o.position.clone().add(closestNormal));\n        o.rotateZ(Math.PI);\n        o.rotateY(Math.PI);\n        if (typeof rotation === 'number') o.rotateZ(rotation);\n        applyProps(state.current, {\n          rotation: o.rotation\n        });\n      } else {\n        applyProps(state.current, {\n          rotation\n        });\n      }\n      if (helper.current) {\n        applyProps(helper.current, state.current);\n      }\n      target.geometry = new DecalGeometry(parent, state.current.position, state.current.rotation, state.current.scale);\n      // Reset parents matix-world\n      parent.matrixWorld = matrixWorld;\n      return () => {\n        target.geometry.dispose();\n      };\n    }\n  }, [mesh, ...vecToArray(position), ...vecToArray(scale), ...vecToArray(rotation)]);\n  React.useLayoutEffect(() => {\n    if (helper.current) {\n      // Prevent the helpers from blocking rays\n      helper.current.traverse(child => child.raycast = () => null);\n    }\n  }, [debug]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref,\n    \"material-transparent\": true,\n    \"material-polygonOffset\": true,\n    \"material-polygonOffsetFactor\": polygonOffsetFactor,\n    \"material-depthTest\": depthTest,\n    \"material-map\": map\n  }, props), children, debug && /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: helper\n  }, /*#__PURE__*/React.createElement(\"boxGeometry\", null), /*#__PURE__*/React.createElement(\"meshNormalMaterial\", {\n    wireframe: true\n  }), /*#__PURE__*/React.createElement(\"axesHelper\", null)));\n});\nexport { Decal };","map":{"version":3,"names":["_extends","React","THREE","applyProps","DecalGeometry","isArray","vec","Array","vecToArray","arguments","length","undefined","Vector3","Euler","x","y","z","Decal","forwardRef","_ref","debug","depthTest","polygonOffsetFactor","map","mesh","children","position","rotation","scale","props","_objectWithoutProperties","_excluded","ref","useRef","useImperativeHandle","current","helper","state","useLayoutEffect","parent","target","Mesh","Error","matrixWorld","clone","identity","o","Object3D","copy","vertices","geometry","attributes","array","normal","computeVertexNormals","distance","Infinity","closestNormal","ox","oy","oz","vLength","chosenIdx","i","xDiff","yDiff","zDiff","distSquared","fromArray","lookAt","add","rotateZ","Math","PI","rotateY","dispose","traverse","child","raycast","createElement","wireframe"],"sources":["C:/Users/waleed/Desktop/node_modules/@react-three/drei/core/Decal.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { applyProps } from '@react-three/fiber';\nimport { DecalGeometry } from 'three-stdlib';\n\nfunction isArray(vec) {\n  return Array.isArray(vec);\n}\nfunction vecToArray(vec = [0, 0, 0]) {\n  if (isArray(vec)) {\n    return vec;\n  } else if (vec instanceof THREE.Vector3 || vec instanceof THREE.Euler) {\n    return [vec.x, vec.y, vec.z];\n  } else {\n    return [vec, vec, vec];\n  }\n}\nconst Decal = /* @__PURE__ */React.forwardRef(function Decal({\n  debug,\n  depthTest = false,\n  polygonOffsetFactor = -10,\n  map,\n  mesh,\n  children,\n  position,\n  rotation,\n  scale,\n  ...props\n}, forwardRef) {\n  const ref = React.useRef(null);\n  React.useImperativeHandle(forwardRef, () => ref.current);\n  const helper = React.useRef(null);\n  const state = React.useRef({\n    position: new THREE.Vector3(),\n    rotation: new THREE.Euler(),\n    scale: new THREE.Vector3(1, 1, 1)\n  });\n  React.useLayoutEffect(() => {\n    const parent = (mesh == null ? void 0 : mesh.current) || ref.current.parent;\n    const target = ref.current;\n    if (!(parent instanceof THREE.Mesh)) {\n      throw new Error('Decal must have a Mesh as parent or specify its \"mesh\" prop');\n    }\n    if (parent) {\n      applyProps(state.current, {\n        position,\n        scale\n      });\n\n      // Zero out the parents matrix world for this operation\n      const matrixWorld = parent.matrixWorld.clone();\n      parent.matrixWorld.identity();\n      if (!rotation || typeof rotation === 'number') {\n        const o = new THREE.Object3D();\n        o.position.copy(state.current.position);\n\n        // Thanks https://x.com/N8Programs !\n        const vertices = parent.geometry.attributes.position.array;\n        if (parent.geometry.attributes.normal === undefined) parent.geometry.computeVertexNormals();\n        const normal = parent.geometry.attributes.normal.array;\n        let distance = Infinity;\n        let closestNormal = new THREE.Vector3();\n        const ox = o.position.x;\n        const oy = o.position.y;\n        const oz = o.position.z;\n        const vLength = vertices.length;\n        let chosenIdx = -1;\n        for (let i = 0; i < vLength; i += 3) {\n          const x = vertices[i];\n          const y = vertices[i + 1];\n          const z = vertices[i + 2];\n          const xDiff = x - ox;\n          const yDiff = y - oy;\n          const zDiff = z - oz;\n          const distSquared = xDiff * xDiff + yDiff * yDiff + zDiff * zDiff;\n          if (distSquared < distance) {\n            distance = distSquared;\n            chosenIdx = i;\n          }\n        }\n        closestNormal.fromArray(normal, chosenIdx);\n\n        // Get vector tangent to normal\n        o.lookAt(o.position.clone().add(closestNormal));\n        o.rotateZ(Math.PI);\n        o.rotateY(Math.PI);\n        if (typeof rotation === 'number') o.rotateZ(rotation);\n        applyProps(state.current, {\n          rotation: o.rotation\n        });\n      } else {\n        applyProps(state.current, {\n          rotation\n        });\n      }\n      if (helper.current) {\n        applyProps(helper.current, state.current);\n      }\n      target.geometry = new DecalGeometry(parent, state.current.position, state.current.rotation, state.current.scale);\n      // Reset parents matix-world\n      parent.matrixWorld = matrixWorld;\n      return () => {\n        target.geometry.dispose();\n      };\n    }\n  }, [mesh, ...vecToArray(position), ...vecToArray(scale), ...vecToArray(rotation)]);\n  React.useLayoutEffect(() => {\n    if (helper.current) {\n      // Prevent the helpers from blocking rays\n      helper.current.traverse(child => child.raycast = () => null);\n    }\n  }, [debug]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref,\n    \"material-transparent\": true,\n    \"material-polygonOffset\": true,\n    \"material-polygonOffsetFactor\": polygonOffsetFactor,\n    \"material-depthTest\": depthTest,\n    \"material-map\": map\n  }, props), children, debug && /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: helper\n  }, /*#__PURE__*/React.createElement(\"boxGeometry\", null), /*#__PURE__*/React.createElement(\"meshNormalMaterial\", {\n    wireframe: true\n  }), /*#__PURE__*/React.createElement(\"axesHelper\", null)));\n});\n\nexport { Decal };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}